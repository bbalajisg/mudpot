# Linux

## Disk Usage

```bash
du -sh    
```

To display the largest folders/files including the sub-directories, run:

```bash
du -Sh | sort -rh | head -5
```

[![Find Largest Folder and Sub directories](https://www.tecmint.com/wp-content/uploads/2016/01/Find-Largest-Folder-and-Sub-directories.gif)](https://www.tecmint.com/wp-content/uploads/2016/01/Find-Largest-Folder-and-Sub-directories.gif)

![Every Linux networking tool ](../../.gitbook/assets/img-20190225-wa0001.jpg)

## **Compress**

How do I compress every file in a directory into its own tar whilst preserving the name for each file?

if you have a HUGE number of files or want to do it on a recursive directory structure you can also use

```bash
find . -type f -exec gzip {} \;
```

and if you need to put the output into a different directory \(in this example, `../target`\) and don't want to remove the originals, you can do something like:

```bash
find . -type f -print | while read fname ; do
    mkdir -p "../target/`dirname \"$fname\"`"
    gzip -c "$fname" > "../target/$fname.gz"
done                                
```

### Remove files older than 30 days

```bash
find /path/To/File -type f -name '*.bb' -mtime +    

30 -exec rm {} \;
```



netstat -nap \| grep ESTA





#### Bash loses network connectivity once connected to a VPN <a id="bash-loses-network-connectivity-once-connected-to-a-vpn"></a>

If after connecting to a VPN on Windows, bash loses network connectivity, try this workaround from within bash. This workaround will allow you to manually override the DNS resolution through `/etc/resolv.conf`.

1. Take a note of the DNS server of the VPN from doing `ipconfig.exe /all`
2. Make a copy of the existing resolv.conf `sudo cp /etc/resolv.conf /etc/resolv.conf.new`
3. Unlink the current resolv.con `sudo unlink /etc/resolv.conf`
4. `sudo mv /etc/resolv.conf.new /etc/resolv.conf`
5. Open `/etc/resolv.conf` and  a. Delete the first line from the file, which says "\# This file was automatically generated by WSL. To stop automatic generation of this file, remove this line.".  b. Add the DNS entry from \(1\) above as the very first entry in the list of DNS servers.  c. Close the file.  

Once you have disconnected the VPN, you will have to revert the changes to `/etc/resolv.conf`. To do this, do:

1. `cd /etc`
2. `sudo mv resolv.conf resolv.conf.new`
3. `sudo ln -s ../run/resolvconf/resolv.conf resolv.conf`

### Add System user

sudo groupadd -r -g 5086 NPN01 && sudo useradd -r -m -d /app/dcbreport/reports/NPN01 -s /bin/false -u 5086 -g 5086 NPN01

